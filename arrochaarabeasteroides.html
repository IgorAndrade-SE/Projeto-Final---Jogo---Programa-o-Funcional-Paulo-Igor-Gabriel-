<!--Aqui realizaremos o desenvolvimento do nosso jogo-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Arrocha Árabe: Asteroides></title>
    <style></style>

</head>

<body>
    
   
    <canvas id="Canvasdojogo" width="800" height="600"></canvas>
    <script>
     //Aqui definimos as funções que serão utilizadas ao longo do código   
     const FPS = 30
     const TAMANHO_DA_NAVE =  30
     const IMPULSO_DA_NAVE  = 5
     const VELOCIDADE_DE_ROTAÇÃO = 180
     const FRICÇÃO = 0.7

     const canv = document.getElementById("Canvasdojogo");
     const contexto = canv.getContext("2d")

     //Aqui, criamos um registro com as informações da nave, dando o Object.freeze afim de garantir a imutabilidade dela
     const nave = Object.freeze( 
        {
          x: canv.width / 2, 
          y: canv.height / 2, //essas duas estão sendo utilizadas para fazer a nave começar do meio da tela, por meio de informações das coordenadas x e y
          raio: TAMANHO_DA_NAVE / 2,
          ângulo: 90 / 180 * Math.PI, // converte para radianos 
          rotação: 0,
          impulsionando: false,
          impulso: Object.freeze({
                x: 0,
                y: 0
           })  

        })
    
//Aqui, criamos uma cópia do registro, para podermos alterar valores e, ainda assim, garantir a imutabilidade do registro original
   const novaNave = {
  ...nave,
  impulso: {...nave.impulso}
   }

   //Aqui, realizamos os comandos e o código para os eventos do clique de teclas no teclado, para fazer a nave se movimentat pelo mapa
    const keyDown = (/** @type {KeyboardEvent} */ evento) => {  // o keycode armazena um número que representa a tecla que foi pressionada
     switch(evento.keyCode){
          case 37: //37 representa a seta para a esquerda(objetivo: rotacionar para a esquerda)
            novaNave.rotação = VELOCIDADE_DE_ROTAÇÃO / 180 * Math.PI / FPS 
            break;
          case 38: //representa a tecla para cima(objetivo: mover a nave para frente) 
           novaNave.impulsionando = true
            break;  
          case 39: //representa a seta para a esquerda(objetivo: rotacionar para a direita)
            novaNave.rotação = -VELOCIDADE_DE_ROTAÇÃO / 180 * Math.PI / FPS
            break; 

            }  
        }
    const keyUp = (/** @type {KeyboardEvent} */evento) => {  // o keycode armazena um número que representa a tecla que foi pressionada
        switch(evento.keyCode) /**uma série de perguntas do tipo if/else*/{
          case 37: //37 representa a seta para a esquerda(objetivo: parar de rotacionar)
            novaNave.rotação = 0; 
            break;
          case 38: //representa a tecla para cima(objetivo: mover a nave para frente) 
            novaNave.impulsionando = false
            break;  
          case 39: //representa a seta para a esquerda(objetivo: parar de rotacionar)
            novaNave.rotação = 0;
            break; 
                
               
            }  
        }
        
        
     document.addEventListener("keydown", keyDown); //keydow vai identificar que alguma teclado de teclado está sendo pressionada
     document.addEventListener("keyup", keyUp);

    </script>
</body>

</html>